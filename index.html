<!DOCTYPE html>
<html>
<head>
<title>PRIME90.PRO ULTRA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  background:#000;
  font-family: Inter, sans-serif;
  color:#fff;
  padding:20px;
}
.glass {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(20px);
  border-radius:30px;
  padding:20px;
  margin-bottom:20px;
  border:1px solid rgba(255,255,255,0.1);
}
button {
  background: linear-gradient(90deg,#00f2ff,#ff00ff);
  border:none;
  padding:12px 25px;
  border-radius:30px;
  font-weight:bold;
  color:black;
  cursor:pointer;
}
.bar {
  height:16px;
  background:#111;
  border-radius:10px;
  overflow:hidden;
}
.fill {
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#00f2ff,#ffcc00);
  transition:1s;
}
.radar {
  width:200px;
  height:200px;
  border-radius:50%;
  border:2px solid #00f2ff;
  position:relative;
  margin:auto;
}
.radar::after {
  content:"";
  position:absolute;
  width:50%;
  height:2px;
  background:#00f2ff;
  top:50%;
  left:50%;
  transform-origin:left;
  animation:spin 2s linear infinite;
}
@keyframes spin {
  0%{transform:rotate(0deg);}
  100%{transform:rotate(360deg);}
}
</style>
</head>

<body>

<h1>âš¡ PRIME90.PRO ULTRA</h1>

<div class="glass">
<button onclick="loadMatches()">ðŸš€ Load Matches (Cache Mode)</button>
<div id="matches"></div>
</div>

<div class="glass">
<h2 id="matchTitle">Select Match</h2>

<p>Over 0.5 HT</p>
<div class="bar"><div id="ht" class="fill"></div></div>

<p>Over 2.5 FT</p>
<div class="bar"><div id="ft" class="fill"></div></div>

<h2 id="pick"></h2>
<h3 id="conf"></h3>

<div class="radar"></div>
</div>

<script>
const WORKER="https://createworker.arnupapsawad-mark2546.workers.dev/gemini";

// ðŸ”¥ Timeout à¸à¸±à¸™à¸„à¹‰à¸²à¸‡
function fetchTimeout(url,options,timeout=8000){
  return Promise.race([
    fetch(url,options),
    new Promise((_,r)=>setTimeout(()=>r("timeout"),timeout))
  ]);
}

// ðŸ”¥ Cache Matches
let cacheMatches = JSON.parse(localStorage.getItem("matchesCache")||"null");

// Fake fallback data
const fakeMatches = [
"Man United vs Liverpool",
"Real Madrid vs Barcelona",
"Arsenal vs Chelsea",
"Bayern vs Dortmund",
"PSG vs Marseille"
];

async function loadMatches(){
  if(cacheMatches){
    console.log("CACHE USED");
    showMatches(cacheMatches);
    return;
  }

  document.getElementById("matches").innerHTML="Loading AI matches...";

  const prompt="List 5 football matches today. Plain list.";

  const res = await fetchTimeout(WORKER,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({contents:[{parts:[{text:prompt}]}]})
  });

  if(res==="timeout"){
    console.warn("AI TIMEOUT â†’ FAKE DATA");
    cacheMatches=fakeMatches;
    localStorage.setItem("matchesCache",JSON.stringify(cacheMatches));
    showMatches(cacheMatches);
    return;
  }

  const data = await res.json();
  const text=data.candidates[0].content.parts[0].text;
  const list=text.split("\n").filter(x=>x.trim());

  cacheMatches=list;
  localStorage.setItem("matchesCache",JSON.stringify(list));
  showMatches(list);
}

function showMatches(list){
  let html="";
  list.forEach(m=>{
    html+=`<button onclick="analyze('${m}')">${m}</button><br><br>`;
  });
  document.getElementById("matches").innerHTML=html;
}

// ðŸ”¥ à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ AI + Offline fallback
async function analyze(match){
  document.getElementById("matchTitle").innerText=match;

  const prompt=`
Analyze match ${match}.
Return JSON ONLY:
{"over05ht":number,"over25ft":number,"confidence":number,"pick":"text"}
`;

  try {
    const res = await fetchTimeout(WORKER,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({contents:[{parts:[{text:prompt}]}]})
    },7000);

    if(res==="timeout") throw "timeout";

    const t=await res.text();
    const j=t.match(/\{[\s\S]*\}/);
    const d=JSON.parse(j[0]);

    render(d);

  } catch(e){
    console.warn("OFFLINE AI MODE");
    // ðŸ”¥ Offline simulation
    const d={
      over05ht: Math.floor(Math.random()*40)+60,
      over25ft: Math.floor(Math.random()*50)+40,
      confidence: Math.floor(Math.random()*20)+70,
      pick:"OVER 2.5"
    };
    render(d);
  }
}

function render(d){
  document.getElementById("ht").style.width=d.over05ht+"%";
  document.getElementById("ft").style.width=d.over25ft+"%";
  document.getElementById("pick").innerText="ðŸ”¥ PICK: "+d.pick;
  document.getElementById("conf").innerText="Confidence: "+d.confidence+"%";
}
</script>

</body>
</html>
